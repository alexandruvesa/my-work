(window.driftWebpackJsonp=window.driftWebpackJsonp||[]).push([[9],{1536:function(e,t,n){"use strict";n.r(t),function(e){var a=n(26),r=n.n(a),s=n(50),i=n.n(s),o=n(161),c=n.n(o),l=n(149),u=n.n(l),p=n(207),d=n.n(p),m=n(206),h=n.n(m),f=n(205),v=n.n(f),g=n(15),b=n(61),T=n(256),y=n(3),C=n(9),_=n(638),I=n(1675),w=n(1753),k=n(1752),E=n(1625),O=n(79),P=n(59),S=n(5),N=n(7),A=n(34),M=n(23),j=n(32),R=n(24),B=n(1553),D=n(60),W=n(11),L=n(97),x=n(12),z=n(150),U=n(43),H=n(196),q=n(162),F=n(277),G=n(114),Y=function(t){var n=t.attachmentCount,a=t.messagePreview,r=t.maxLength;if("string"==typeof a){var s=a.length>r?a.trim().slice(0,r)+"…":a.trim();if(s)return e.createElement("span",null,s)}return n>0?e.createElement(w.a,{count:n}):e.createElement("span",null,e.createElement("em",null,"No preview"))};Y.propTypes={messagePreview:g.PropTypes.string,attachmentCount:g.PropTypes.number,maxLength:g.PropTypes.number},Y.defaultProps={attachmentCount:0,maxLength:100};var J=function(t){function n(){var e,t,a,s,o=this;u()(this,n);for(var l=arguments.length,p=Array(l),d=0;d<l;d++)p[d]=arguments[d];return t=a=h()(this,(e=n.__proto__||c()(n)).call.apply(e,[this].concat(p))),a.getShowMessageSlider=i()(r.a.mark(function e(){var t,n,s,i,c,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.orgId,s=t.authorizationHeader,i=t.endUserId,c=t.actions,e.prev=1,e.next=4,Object(W.b)(x.e+"/cutover/organizations/"+n+"?namespace=WIDGET_MOBILE_SLIDER",{method:"GET",headers:s});case 4:l=e.sent,c.setShowMessageSlider({isMessageSliderTest:l.WIDGET_MOBILE_SLIDER,shouldShowMessageSlider:!l.WIDGET_MOBILE_SLIDER||i%2==0}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),c.setShowMessageSlider({isMessageSliderTest:!1,shouldShowMessageSlider:!0}),console.warn("failed to fetch",e.t0);case 12:case"end":return e.stop()}},e,o,[[1,8]])})),a.markHasInteracted=function(){var e=a.props,t=e.actions,n=e.conversationCampaign,r=(void 0===n?{}:n).id;r?t.setHasInteracted({hasInteracted:!0,campaignId:r}):t.setHasInteracted({hasInteracted:!0})},a.handleClick=function(){var e=a.props,t=e.actions,n=e.view,r=e.botAvatarVersion,s=e.message;t.trackClick({ctaType:"content",view:n,botAvatarVersion:r}),t.markConversationAsRead(s.get("conversationId")),t.goToConversation(s.get("conversationId")),a.markHasInteracted()},a.handleDismissClick=function(){var e=a.props,t=e.actions,n=e.botAvatarVersion,r=e.view,s=e.driftUsersById,i=e.message,o=e.conversation;t.trackClick({ctaType:"dismiss",view:r,botAvatarVersion:n});var c=s[i.get("authorId")];a.markHasInteracted(),t.sliderMessageDismissed({botMessage:c&&!!c.bot,userInteractedWithConversation:"BULK_SENT"===!o.get("status")}),t.markConversationAsRead(i.get("conversationId"))},a.handleResize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.height,n=e.width;a.props.actions.iframeOverrideSize({height:t?t+"px":void 0,width:n?n+"px":void 0})},s=t,h()(a,s)}return v()(n,t),d()(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.showMessageSlider,n=e.actions,a=e.isPlaybookImpression,r=e.message,s=e.campaignMessage,i=e.sentImpressionForPlaybook,o=r.getIn(["attributes","playbookId"]);a&&!i&&n.trackImpression({source:q.a.ACTIVE_PLAYBOOK,playbookId:o,sendId:"CONVERSATION:"+r.get("conversationId")}),!!s&&Object(_.a)(s,r.toJS())&&!i&&n.trackImpression({source:q.a.PASSIVE_PLAYBOOK,playbookId:o,sendId:"CONVERSATION:"+r.get("conversationId")}),void 0===t&&Object(z.b)()?this.getShowMessageSlider():n.setShowMessageSlider({isMessageSliderTest:!1,shouldShowMessageSlider:!0})}},{key:"render",value:function(){var t=this.props,n=t.message,a=t.avatarUrl,r=t.bot,s=t.name,i=t.showNewCallout,o=t.showMessageSlider,c=n.get("attachments").size,l=n.getIn(["attributes","preview"]);return e.createElement(I.a,{avatarUrl:a,bot:r,iconType:E.a.CHAT,onResize:this.handleResize,onWidgetClick:this.handleClick},o&&e.createElement(k.a,{onClick:this.handleClick,name:s,bot:r,onDismissClick:this.handleDismissClick,showNewCallout:i,showBranding:N.F},e.createElement(Y,{attachmentCount:c,messagePreview:l})))}}]),n}(g.Component);J.propTypes={message:g.PropTypes.object.isRequired,avatarUrl:g.PropTypes.string,bot:g.PropTypes.bool,name:g.PropTypes.string.isRequired,conversation:g.PropTypes.object,driftUsersById:g.PropTypes.object,actions:g.PropTypes.shape({iframeOverrideSize:g.PropTypes.func.isRequired,goToConversation:g.PropTypes.func.isRequired,markConversationAsRead:g.PropTypes.func.isRequired,sliderMessageDismissed:g.PropTypes.func.isRequired})},t.default=Object(T.b)(function(e){var t=Object(A.c)(e),n=Object(A.k)(e)||Object(y.fromJS)(t),a=Object(N.y)(n.get("authorId"))(e),r=n.get("conversationId"),s=Object(A.g)(e,r),i=Object(H.f)(e,{messageId:s}),o=a&&a.bot,c=Object(F.a)(n.getIn(["attributes","interactionId"]))(e),l=Object(A.b)(e),u=n.getIn(["attributes","playbookId"]),p=!!u&&Object(L.b)(e,u);return{message:n,showBranding:Object(N.F)(e),avatarUrl:a&&a.avatarUrl,name:Object(C.a)(a,"name",""),conversation:Object(j.c)(e,{conversationId:r}),driftUsersById:Object(N.z)(e),view:o?D.k.MESSAGE_CALLOUT_BOT:D.k.MESSAGE_CALLOUT_USER,botAvatarVersion:o?Object(S.d)(e):void 0,orgId:Object(N.w)(e),authorizationHeaders:Object(S.c)(e),endUserId:Object(S.i)(e).id,showMessageSlider:Object(U.q)(e)&&l===G.a.EXPLICIT,bot:o,isPlaybookImpression:i,conversationCampaign:c,hasInteracted:Object(U.i)(e),activeCampaignDisplayState:l,campaignMessage:t,sentImpressionForPlaybook:p}},function(e){return{actions:Object(b.b)({iframeOverrideSize:O.iframeOverrideSize,goToConversation:P.f,markConversationAsRead:P.g,sliderMessageDismissed:M.P,trackImpression:R.g,trackClick:R.f,setShowMessageSlider:B.b,setHasInteracted:B.a},e)}})(J)}.call(this,n(15))},1552:function(e,t,n){"use strict";t.__esModule=!0;var a=s(n(1541)),r=s(n(1542));function s(e){return e&&e.__esModule?e:{default:e}}var i=function(e){return e};t.default=(0,a.default)(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;return function(a){var s=void 0,i=void 0;return function(o){return e(o)?(s=s||(0,r.default)(t(a)))(o):(i=i||(0,r.default)(n(a)))(o)}}},"branch")},1553:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return i});var a=n(2),r=n(303),s=Object(a.b)(r.a),i=Object(a.b)(r.b)},1557:function(e,t,n){"use strict";t.__esModule=!0;var a=n(15),r=function(e){return e&&e.__esModule?e:{default:e}}(n(1541));var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return null},t}(a.Component);s.displayName="Nothing";t.default=(0,r.default)(function(e){return s},"renderNothing",!1,!0)},1624:function(e,t,n){e.exports=n.p+"static/images/4a3c1161b81f906ccb7e41df6b548811.svg"},1627:function(e,t,n){e.exports={Badge:"_23adWK3Uprf4Ktba9B88ed"}},1628:function(e,t,n){"use strict";(function(e){var a=n(15),r=n(431),s=n.n(r),i=n(1627),o=n.n(i),c=n(1552),l=n.n(c),u=n(1557),p=n.n(u),d=function(t){var n=t.count,a=t.max,r=t.className,i=t.theme,c=t.widgetButton,l=t.hasInteracted;return!c||i.unreadBadgeEnabled||l?e.createElement("div",{className:s()(o.a.Badge,r),"aria-label":(n>a?a:n)+" unread messages"},n>a?a+"+":n):null};d.propTypes={count:a.PropTypes.number.isRequired,max:a.PropTypes.number,className:a.PropTypes.string},d.defaultProps={max:99};var m=l()(function(e){return e.count<1},p.a);t.a=m(d)}).call(this,n(15))},1631:function(e,t,n){"use strict";(function(e){var a=n(4),r=n.n(a),s=n(161),i=n.n(s),o=n(149),c=n.n(o),l=n(207),u=n.n(l),p=n(206),d=n.n(p),m=n(205),h=n.n(m),f=n(15),v=n(527),g=n(533),b=n.n(g),T=n(431),y=n.n(T),C=n(1668),_=n.n(C),I=function(t){function n(e){c()(this,n);var t=d()(this,(n.__proto__||i()(n)).call(this,e));return t.handleWheel=function(e){var n=void 0;try{n=Object(v.findDOMNode)(t)}catch(e){return void console.error(e)}if(n)return e.deltaY<0&&0===n.scrollTop?(e.preventDefault(),!1):e.deltaY>0&&n.clientHeight+n.scrollTop+e.deltaY>=n.scrollHeight?(e.preventDefault(),!1):void 0},t.handleWheel=b()(t.handleWheel,100),t}return h()(n,t),u()(n,[{key:"render",value:function(){return e.createElement("div",r()({},this.props,{className:y()(_.a.ScrollableContent,this.props.className)}),this.props.children)}}]),n}(f.Component);I.propTypes={className:f.PropTypes.string,children:f.PropTypes.node},t.a=I}).call(this,n(15))},1632:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return h});var a=n(4),r=n.n(a),s=n(208),i=n.n(s),o=n(15),c=n(431),l=n.n(c),u=n(1624),p=n.n(u),d=n(1670),m=n.n(d);function h(t){var n=t.className,a=i()(t,["className"]);return e.createElement("button",r()({},a,{className:l()(m.a.DismissButton,n),title:"Dismiss","aria-label":"Dismiss"}),e.createElement("img",{className:m.a.DismissButtonIcon,src:p.a,alt:"×"}))}h.propTypes={className:o.PropTypes.string,onClick:o.PropTypes.func.isRequired}}).call(this,n(15))},1633:function(e,t,n){"use strict";(function(e){var a=n(4),r=n.n(a),s=n(10),i=n.n(s),o=n(208),c=n.n(o),l=n(15),u=n(431),p=n.n(u),d=n(1672),m=n.n(d),h=e.createElement("span",{className:m.a.CalloutTail});function f(t){var n,a=t.className,s=t.children,o=t.hasTail,l=t.onClick,u=c()(t,["className","children","hasTail","onClick"]);return e.createElement("div",r()({},u,{onClick:l,className:p()(m.a.Callout,(n={},i()(n,m.a.hasTail,o),i()(n,m.a.hasClickHandler,l),n),a)}),o&&h,e.createElement("div",{className:m.a.Content},s))}f.propTypes={onClick:l.PropTypes.func,className:l.PropTypes.string,children:l.PropTypes.node,hasTail:l.PropTypes.bool},f.defaultProps={hasTail:!0},t.a=f}).call(this,n(15))},1634:function(e,t,n){"use strict";var a=n(256),r=n(1628),s=n(34),i=n(16),o=n(43);t.a=Object(a.b)(function(e){return{count:Object(s.o)(e),theme:Object(i.t)(e),hasInteracted:Object(o.i)(e)}})(r.a)},1661:function(e,t,n){"use strict";var a=n(1633),r=n(1632),s=function(e){window&&(window.requestAnimationFrame&&window.requestAnimationFrame(e),window.setTimeout(e,0))},i=n(1631);n.d(t,"a",function(){return a.a}),n.d(t,"b",function(){return r.a}),n.d(t,!1,function(){return s}),n.d(t,"c",function(){return i.a})},1665:function(e,t,n){e.exports={sliderTransitionEnter:"RleSeSSshUnxBU54Ju-Kg",sliderTransitionAppear:"yZ8m6oJqdYiWLMMseLe71",sliderTransitionLeave:"_2REwem2ttd38R0rWXhgPB3",sliderTransitionLeaveActive:"_2PYlwCQUwR96W4dGlZoidv",sliderTransitionEnterActive:"_1A1yWaMm_2RUCDFzylxa4q",sliderTransitionAppearActive:"_1HkBS3rdb0dAn10UW3DlfS"}},1666:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});var a=n(4),r=n.n(a),s=n(15),i=n(1546),o=n.n(i),c=n(1665),l=n.n(c),u=function(t){return e.createElement(o.a,r()({},t,{transitionName:{enter:l.a.sliderTransitionEnter,enterActive:l.a.sliderTransitionEnterActive,appear:l.a.sliderTransitionAppear,appearActive:l.a.sliderTransitionAppearActive,leave:l.a.sliderTransitionLeave,leaveActive:l.a.sliderTransitionLeaveActive},transitionAppear:!0,transitionAppearTimeout:250,transitionEnterTimeout:250,transitionLeaveTimeout:200}))};u.propTypes={children:s.PropTypes.node}}).call(this,n(15))},1668:function(e,t,n){e.exports={ScrollableContent:"_3qJrcSln-TzTgp5jAZsvE-"}},1670:function(e,t,n){e.exports={DismissButton:"_1lVdwgQwG8iYSXC1rtIUn-",DismissButtonIcon:"_3sY_jwfgYHGUb3-n-s6cwm"}},1672:function(e,t,n){e.exports={CalloutTail:"_2IOZNDmRPpIkWq7_LHNMMH",Callout:"_2Am0IsT9lH_Ptdj-CW2uiy",hasClickHandler:"_1w6YXZ6Lh2aJD2goJRtLx3",hasTail:"_2hJjohH-EqiCHgHG2iPxnD",Content:"_2fl3RiMFMzxYgTM_TjTg8I"}},1674:function(e,t,n){e.exports={Wrapper:"AsmHNMwa8V6JFxwzpR6dG",SliderLayout:"_3GvcBFnnOqEvAbpxb4K9_",WidgetButton:"j8lkf_ta2sl2WMvjiqiaK",Content:"-zOcMNdFsi7uCebRFihg7",UnreadCountBadgeWrapper:"_2zlCNz6GWncyQ9b6a9KhmX"}},1675:function(e,t,n){"use strict";(function(e){var a=n(161),r=n.n(a),s=n(149),i=n.n(s),o=n(207),c=n.n(o),l=n(206),u=n.n(l),p=n(205),d=n.n(p),m=n(15),h=n(1561),f=n.n(h),v=n(1634),g=n(1560),b=n(1625),T=n(1674),y=n.n(T),C=function(t){function n(){var e,t,a,s;i()(this,n);for(var o=arguments.length,c=Array(o),l=0;l<o;l++)c[l]=arguments[l];return t=a=u()(this,(e=n.__proto__||r()(n)).call.apply(e,[this].concat(c))),a.handleMeasure=function(e){var t=e.width,n=e.height;a.props.onResize&&a.props.onResize({width:t,height:n})},s=t,u()(a,s)}return d()(n,t),c()(n,[{key:"render",value:function(){return e.createElement(f.a,{onMeasure:this.handleMeasure,whitelist:["width","height"]},this.props.children)}}]),n}(m.Component);C.propTypes={onResize:m.PropTypes.func.isRequired,children:m.PropTypes.node.isRequired};var _=function(t){function n(){return i()(this,n),u()(this,(n.__proto__||r()(n)).apply(this,arguments))}return d()(n,t),c()(n,[{key:"render",value:function(){var t=this.props,n=t.children,a=t.avatarUrl,r=t.bot,s=t.onWidgetClick,i=t.iconType,o=t.onResize;return e.createElement("div",{className:y.a.Wrapper},e.createElement(C,{onResize:o},e.createElement("div",{"aria-haspopup":"dialog","aria-label":"Open new message",className:y.a.SliderLayout},e.createElement(g.a,{className:y.a.WidgetButton,onClick:s,iconType:i,avatarUrl:a,bot:r}),e.createElement("div",{className:y.a.UnreadCountBadgeWrapper},e.createElement(v.a,{widgetButton:!0})),e.createElement("div",{className:y.a.Content},n))))}}]),n}(m.Component);_.propTypes={children:m.PropTypes.node,avatarUrl:m.PropTypes.string,bot:m.PropTypes.bool,onWidgetClick:m.PropTypes.func,onResize:m.PropTypes.func,iconType:m.PropTypes.oneOf([b.a.ANNOUNCEMENT,b.a.NPS,b.a.CHAT])},t.a=_}).call(this,n(15))},1751:function(e,t,n){e.exports={Slider:"_2d_Bp-Kt5gkBPBdwssn49b",DismissButton:"_6eWTYUKsxoA_IdO5RL7zQ",Content:"_1QMEkp0zgBS93G6kHWmAHJ",FlexContentWrapper:"l82_D_KImuLA5zRjJBNjH",DismissButtonWrapper:"mTzHPSKdhS7SRFrqMCAlW"}},1752:function(e,t,n){"use strict";(function(e){var a=n(161),r=n.n(a),s=n(149),i=n.n(s),o=n(207),c=n.n(o),l=n(206),u=n.n(l),p=n(205),d=n.n(p),m=n(15),h=n(1661),f=n(1666),v=n(1751),g=n.n(v),b=function(t){function n(){return i()(this,n),u()(this,(n.__proto__||r()(n)).apply(this,arguments))}return d()(n,t),c()(n,[{key:"render",value:function(){var t=this.props,n=t.onClick,a=t.onDismissClick,r=t.children;return e.createElement("div",{className:g.a.Slider,role:"dialog","aria-label":"You have received a message"},e.createElement(f.a,null,e.createElement("div",{className:g.a.FlexContentWrapper,key:"slider"},e.createElement("div",{className:g.a.DismissButtonWrapper},e.createElement(h.b,{className:g.a.DismissButton,onClick:a})),e.createElement(h.a,{onClick:n},e.createElement("div",{className:g.a.Content},r)))))}}]),n}(m.Component);b.propTypes={children:m.PropTypes.node,onClick:m.PropTypes.func.isRequired,onDismissClick:m.PropTypes.func.isRequired},t.a=b}).call(this,n(15))},1753:function(e,t,n){"use strict";(function(e){var a=n(4),r=n.n(a),s=n(15),i=n(31),o=Object(i.h)({attachmentCount:{id:"app.message.attachmentCount",description:"Displays a messages's number of attachments",defaultMessage:"{count, plural,\n        =0 {No attachments}\n        one {1 attachment}\n        other {# attachments}\n      }"}}),c=function(t){return e.createElement(i.b,r()({},o.attachmentCount,{values:{count:t.count}}))};c.propTypes={count:s.PropTypes.number.isRequired},t.a=c}).call(this,n(15))}}]);